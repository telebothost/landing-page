<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Anti AdBlock</title>
</head>
<body>
  <div id="adsbygoogle">
    <h2>test</h2>
    <p>test</p>
  </div>
<script>
(function(){
"use strict";

const _c={
  _a:["https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","https://googleads.g.doubleclick.net/pagead/viewthroughconversion/10877504485/?random="],
  _r:2,
  _d:2000,
  _o:"_adblock_overlay",
  _m:"Please disable Ad Blocker to continue.",
  _b:true,
  _s:true,
  _i:10000,
  _l:2000,
  _networkCheckUrl: "https://1.1.1.1/cdn-cgi/trace"
};

let _s={_p:false,_u:false,_t:0};

function _q(s){try{return document.querySelector(s)}catch(e){return null}}

function _z(){return Math.max(...Array.from(document.querySelectorAll("body *"),e=>parseInt(getComputedStyle(e).zIndex)||0),0)+10;}

function _o(type="adblock"){
  if(_q("#"+_c._o)) return;
  
  const d=document.createElement("div");
  d.id=_c._o;
  const title = type === "network" ? "Network Error" : "Ad Blocker Detected";
  const message = type === "network" ? "Unable to connect to the internet. Please check your network connection." : _c._m;
  const buttonText = type === "network" ? "Retry Connection" : "Retry";
  
  d.style.cssText=`
    position:fixed;inset:0;
    display:flex;flex-direction:column;justify-content:center;align-items:center;
    padding:20px;box-sizing:border-box;
    background:${_c._b?'rgba(0,0,0,0.95)':'#000'};
    color:#fff;font-family:Arial,sans-serif;text-align:center;
    z-index:${_z()};pointer-events:auto;
    overflow:hidden;
  `;
  
  const c=document.createElement("div");
  c.style.cssText=`
    position:absolute;inset:0;
    background:#000;
    z-index:-1;
  `;
  d.appendChild(c);
  
  const m=document.createElement("div");
  m.style.cssText="max-width:760px;position:relative;z-index:1;";
  m.innerHTML=`<h1 style="margin:0 0 20px 0;font-size:26px;color:#fff">${title}</h1>
               <p style="font-size:18px;margin-bottom:20px;">${message}</p>`;
  
  const b=document.createElement("button");
  b.innerText=buttonText;
  b.style.cssText="margin-top:20px;padding:12px 30px;font-size:18px;cursor:pointer;border:none;border-radius:8px;background:#ff4444;color:#fff;font-weight:bold;";
  b.addEventListener("click",()=>{
    if(type === "network") {
      checkNetworkAndAdblock();
    } else {
      _b();
    }
  });
  m.appendChild(b);
  
  d.appendChild(m);
  
  const s=document.createElement("style");
  s.textContent=`
    body{overflow:hidden !important;margin:0 !important;height:100vh !important;position:relative !important;}
    html{overflow:hidden !important;height:100vh !important;}
  `;
  document.head.appendChild(s);
  
  document.documentElement.style.overflow="hidden";
  document.body.style.overflow="hidden";
  document.body.style.position="fixed";
  document.body.style.width="100%";
  document.body.style.height="100%";
  document.body.style.top="0";
  document.body.style.left="0";
  
  document.body.appendChild(d);
}

function _r(){
  const o=_q("#"+_c._o);
  if(o && o.parentNode) o.parentNode.removeChild(o);
  
  const s=_q("style");
  if(s && s.textContent.includes("overflow:hidden")) document.head.removeChild(s);
  
  document.documentElement.style.overflow="";
  document.body.style.overflow="";
  document.body.style.position="";
  document.body.style.width="";
  document.body.style.height="";
  document.body.style.top="";
  document.body.style.left="";
}

async function _f(url){
  return new Promise(resolve=>{
    const controller = new AbortController();
    const timeoutId = setTimeout(() => {
      controller.abort();
      resolve(false);
    }, 3000);
    
    fetch(url,{
      method: 'GET',
      mode: 'no-cors',
      cache: 'no-cache',
      signal: controller.signal
    })
    .then(response => {
      clearTimeout(timeoutId);
      // For no-cors mode, if we get here, the request succeeded
      // Even if blocked by adblocker, the request would fail
      resolve(true);
    })
    .catch(error => {
      clearTimeout(timeoutId);
      resolve(false);
    });
  });
}

async function checkNetwork(){
  return new Promise(resolve=>{
    const controller = new AbortController();
    const timeoutId = setTimeout(() => {
      controller.abort();
      resolve(false);
    }, 3000);
    
    fetch(_c._networkCheckUrl, {
      method: 'GET',
      mode: 'no-cors',
      cache: 'no-cache',
      signal: controller.signal
    })
    .then(response => {
      clearTimeout(timeoutId);
      resolve(true);
    })
    .catch(error => {
      clearTimeout(timeoutId);
      resolve(false);
    });
  });
}

async function testScriptLoad(){
  return new Promise(resolve=>{
    const s=document.createElement("script");
    s.src=_c._a[0]+"?cb="+Date.now();
    s.async=true;
    
    const timeoutId = setTimeout(() => {
      document.head.removeChild(s);
      resolve(false);
    }, 3000);
    
    s.onload=()=>{
      clearTimeout(timeoutId);
      resolve(true);
    };
    
    s.onerror=()=>{
      clearTimeout(timeoutId);
      resolve(false);
    };
    
    document.head.appendChild(s);
  });
}

async function _i(){
  if(_q("#"+_c._o)) return true;
  if(!_c._a||_c._a.length===0) return false;

  return new Promise(async resolve=>{
    let ok=false;
    let n=0;
    
    const stop=()=>{
      if(!ok) resolve(true);
      else resolve(false);
    };
    
    const testAllMethods = async () => {
      // Test 1: Try to load script
      try {
        const scriptResult = await testScriptLoad();
        if(scriptResult) {
          ok = true;
          return;
        }
      } catch(e) {}
      
      // Test 2: Try to fetch ad URLs
      for(let url of _c._a){
        try {
          const fetchResult = await _f(url+Date.now());
          if(fetchResult) {
            ok = true;
            return;
          }
        } catch(e) {}
      }
      
      // Test 3: Try pixel method as fallback
      const pixelResult = await new Promise(resolvePixel => {
        const i=new Image();
        const timeout = setTimeout(() => resolvePixel(false), 3000);
        i.onload=function(){
          clearTimeout(timeout);
          if(this.naturalWidth>0&&this.naturalHeight>0) resolvePixel(true);
          else resolvePixel(false);
        };
        i.onerror=()=>{
          clearTimeout(timeout);
          resolvePixel(false);
        };
        i.src="https://pagead2.googlesyndication.com/pagead/gen_204?id=adblock&p=1&t="+Date.now();
      });
      
      if(pixelResult) {
        ok = true;
      }
    };
    
    const go=async()=>{
      if(n>=_c._r){
        stop();
        return;
      }
      n++;
      
      await testAllMethods();
      
      if(!ok) {
        setTimeout(() => go(), _c._d);
      } else {
        stop();
      }
    };
    
    const overallTimeout = setTimeout(stop, 10000);
    
    go().then(() => {
      clearTimeout(overallTimeout);
    });
  });
}

async function checkAdblock(){
  if(_s._p) return;
  _s._u=true;
  const x=await _i();
  if(x){
    _o("adblock");
    _s._u=false;
  }else{
    _r();
    _s._u=false;
  }
}

async function checkNetworkAndAdblock(){
  // First remove any existing overlay
  _r();
  
  // Check network first
  const networkOk = await checkNetwork();
  
  if(!networkOk){
    // Show network error overlay
    _o("network");
    return;
  }
  
  // If network is OK, check for adblock
  await checkAdblock();
}

function _f(){checkNetworkAndAdblock();}

if(_c._s){
  const go=()=>{
    setTimeout(()=>{
      checkNetworkAndAdblock();
      setInterval(()=>{
        if(!_s._p) checkNetworkAndAdblock();
      },_c._i);
    },_c._l);
  };
  if(document.readyState==="loading") document.addEventListener("DOMContentLoaded",go,{once:true});
  else go();
}
})();
</script>
</body>
</html>