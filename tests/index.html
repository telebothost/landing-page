<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status Dashboard • Website Monitoring</title>
    <meta name="description" content="Real-time status monitoring for all web services and APIs">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0a0a0a;
            --card-bg: #111111;
            --fg: #ffffff;
            --gray: #666666;
            --border: #222222;
            --up: #00ff88;
            --down: #ff3333;
            --degraded: #ffaa00;
            --unknown: #666666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg);
            color: var(--fg);
            line-height: 1.6;
            font-size: 13px;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            padding: 30px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 40px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        h1 {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .status-overview {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .overall-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: var(--card-bg);
            border-radius: 6px;
            border: 1px solid var(--border);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-indicator.up { background: var(--up); }
        .status-indicator.down { background: var(--down); }
        .status-indicator.degraded { background: var(--degraded); }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .last-updated {
            color: var(--gray);
            font-size: 12px;
        }

        .refresh-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--fg);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .refresh-btn:hover {
            background: var(--border);
        }

        .refresh-btn.refreshing i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .monitor-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .monitor-card:hover {
            border-color: var(--gray);
            transform: translateY(-2px);
        }

        .monitor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .monitor-name {
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .monitor-name i {
            font-size: 12px;
            color: var(--gray);
        }

        .monitor-status {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-up { background: rgba(0, 255, 136, 0.1); color: var(--up); }
        .status-down { background: rgba(255, 51, 51, 0.1); color: var(--down); }
        .status-degraded { background: rgba(255, 170, 0, 0.1); color: var(--degraded); }

        .monitor-url {
            color: var(--gray);
            font-size: 11px;
            margin-bottom: 15px;
            word-break: break-all;
        }

        .monitor-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .stat {
            display: flex;
            flex-direction: column;
        }

        .stat-label {
            color: var(--gray);
            font-size: 11px;
            margin-bottom: 4px;
        }

        .stat-value {
            font-weight: 600;
            font-size: 13px;
        }

        .uptime-bar {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .uptime-fill {
            height: 100%;
            border-radius: 2px;
        }

        .uptime-up { background: var(--up); }
        .uptime-down { background: var(--down); }

        .response-time {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: var(--gray);
        }

        .response-time span {
            font-weight: 600;
            color: var(--fg);
        }

        .response-time.good { color: var(--up); }
        .response-time.slow { color: var(--degraded); }
        .response-time.bad { color: var(--down); }

        .incidents {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid var(--border);
        }

        .incidents h2 {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .incident-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .incident {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
        }

        .incident-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .incident-title {
            font-weight: 600;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .incident-title i {
            color: var(--down);
        }

        .incident-time {
            color: var(--gray);
            font-size: 11px;
        }

        .incident-desc {
            color: var(--gray);
            font-size: 12px;
            line-height: 1.5;
        }

        .footer {
            padding: 30px 0;
            border-top: 1px solid var(--border);
            margin-top: 40px;
            text-align: center;
            color: var(--gray);
            font-size: 12px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }

        .footer-links a {
            color: var(--gray);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--fg);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--gray);
        }

        .loading i {
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .status-overview {
                width: 100%;
                justify-content: space-between;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .monitor-stats {
                flex-wrap: wrap;
            }
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* API Source Info */
        .api-info {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 12px;
            color: var(--gray);
        }

        .api-info a {
            color: var(--up);
            text-decoration: none;
        }

        .api-info a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <h1>Status Dashboard</h1>
                    <div class="last-updated" id="lastUpdated">Last updated: <span id="updateTime">--:--:--</span></div>
                </div>
                <div class="status-overview">
                    <div class="overall-status">
                        <div class="status-indicator up" id="overallStatus"></div>
                        <span id="statusText">All Systems Operational</span>
                    </div>
                    <button class="refresh-btn" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="api-info">
            <i class="fas fa-info-circle"></i> 
            Monitoring data powered by <a href="https://uptimerobot.com" target="_blank">UptimeRobot</a> API. 
            Free tier includes 100 monitors with 5-minute checks.
        </div>

        <div class="dashboard-grid" id="monitorsGrid">
            <!-- Monitors will be loaded here -->
            <div class="loading">
                <i class="fas fa-spinner"></i>
                Loading monitor status...
            </div>
        </div>

        <div class="incidents" id="incidentsSection">
            <h2><i class="fas fa-exclamation-triangle"></i> Recent Incidents</h2>
            <div class="incident-list" id="incidentList">
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    Loading incident history...
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>Status Dashboard • Real-time Monitoring</p>
            <div class="footer-links">
                <a href="https://github.com/Soumyadeep765" target="_blank"><i class="fab fa-github"></i> GitHub</a>
                <a href="https://t.me/onDndBro" target="_blank"><i class="fab fa-telegram"></i> Telegram</a>
                <a href="mailto:soumyadeepdas765@gmail.com"><i class="fas fa-envelope"></i> Email</a>
            </div>
        </div>
    </footer>

    <script>
        // Configuration
        const CONFIG = {
            // UptimeRobot API Key - Get yours from https://uptimerobot.com/dashboard#mySettings
            API_KEY: 'YOUR_UPTIMEROBOT_API_KEY',
            
            // Update interval in milliseconds (5 minutes = 300000)
            UPDATE_INTERVAL: 300000,
            
            // Mock data for demo (set to false when using real API)
            USE_MOCK_DATA: true
        };

        // Mock data for demonstration
        const MOCK_MONITORS = [
            {
                id: 1,
                friendly_name: "Main API Server",
                url: "https://api.example.com",
                status: 2, // 2 = up, 9 = down
                type: 1, // HTTP monitor
                all_time_uptime_ratio: 99.87,
                average_response_time: 128,
                port: 443
            },
            {
                id: 2,
                friendly_name: "Telegram Bot Service",
                url: "https://bot.telegram.org",
                status: 2,
                type: 1,
                all_time_uptime_ratio: 99.95,
                average_response_time: 45,
                port: 443
            },
            {
                id: 3,
                friendly_name: "Database Cluster",
                url: "mysql://db.example.com:3306",
                status: 2,
                type: 4, // Port monitor
                all_time_uptime_ratio: 99.99,
                average_response_time: 12,
                port: 3306
            },
            {
                id: 4,
                friendly_name: "Authentication Service",
                url: "https://auth.example.com",
                status: 9, // Down
                type: 1,
                all_time_uptime_ratio: 98.45,
                average_response_time: 324,
                port: 443
            },
            {
                id: 5,
                friendly_name: "CDN Edge Network",
                url: "https://cdn.example.com",
                status: 8, // Seems down
                type: 1,
                all_time_uptime_ratio: 99.78,
                average_response_time: 89,
                port: 443
            },
            {
                id: 6,
                friendly_name: "WebSocket Server",
                url: "wss://ws.example.com",
                status: 2,
                type: 1,
                all_time_uptime_ratio: 99.92,
                average_response_time: 67,
                port: 443
            },
            {
                id: 7,
                friendly_name: "File Storage Service",
                url: "https://storage.example.com",
                status: 2,
                type: 1,
                all_time_uptime_ratio: 99.83,
                average_response_time: 156,
                port: 443
            },
            {
                id: 8,
                friendly_name: "Payment Gateway",
                url: "https://payments.example.com",
                status: 2,
                type: 1,
                all_time_uptime_ratio: 99.97,
                average_response_time: 210,
                port: 443
            }
        ];

        const MOCK_INCIDENTS = [
            {
                id: 1,
                title: "Authentication Service Outage",
                description: "Service experienced degraded performance due to high traffic load. Incident resolved within 45 minutes.",
                time: "2 hours ago",
                status: "resolved"
            },
            {
                id: 2,
                title: "Scheduled Maintenance",
                description: "Database maintenance window completed successfully. Minor performance improvements implemented.",
                time: "Yesterday",
                status: "resolved"
            },
            {
                id: 3,
                title: "CDN Regional Outage",
                description: "Regional CDN node experienced temporary connectivity issues. Traffic rerouted to alternative nodes.",
                time: "3 days ago",
                status: "resolved"
            }
        ];

        class StatusDashboard {
            constructor() {
                this.monitors = [];
                this.incidents = [];
                this.lastUpdate = null;
                this.init();
            }

            init() {
                this.bindEvents();
                this.updateStatus();
                this.startAutoRefresh();
            }

            bindEvents() {
                document.getElementById('refreshBtn').addEventListener('click', () => this.updateStatus());
            }

            async updateStatus() {
                const btn = document.getElementById('refreshBtn');
                btn.classList.add('refreshing');
                
                try {
                    if (CONFIG.USE_MOCK_DATA) {
                        // Use mock data for demo
                        await this.loadMockData();
                    } else if (CONFIG.API_KEY && CONFIG.API_KEY !== 'YOUR_UPTIMEROBOT_API_KEY') {
                        // Use real UptimeRobot API
                        await this.fetchFromUptimeRobot();
                    } else {
                        // No API key configured, use mock data
                        await this.loadMockData();
                    }
                    
                    this.renderDashboard();
                    this.updateLastUpdated();
                } catch (error) {
                    console.error('Error updating status:', error);
                    this.showError('Failed to fetch status data');
                } finally {
                    btn.classList.remove('refreshing');
                }
            }

            async loadMockData() {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // Shuffle statuses for demo
                this.monitors = MOCK_MONITORS.map(monitor => ({
                    ...monitor,
                    // Randomly change some statuses for demo
                    status: Math.random() > 0.85 ? 9 : monitor.status
                }));
                
                this.incidents = MOCK_INCIDENTS;
            }

            async fetchFromUptimeRobot() {
                const response = await fetch('https://api.uptimerobot.com/v2/getMonitors', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        api_key: CONFIG.API_KEY,
                        format: 'json',
                        logs: '1',
                        response_times: '1',
                        response_times_limit: '1'
                    })
                });

                const data = await response.json();
                
                if (data.stat === 'ok') {
                    this.monitors = data.monitors;
                    // You would need to parse incidents from logs
                    this.incidents = this.parseIncidentsFromLogs(data.monitors);
                } else {
                    throw new Error('API Error: ' + data.message);
                }
            }

            parseIncidentsFromLogs(monitors) {
                // Parse incidents from monitor logs
                const incidents = [];
                
                monitors.forEach(monitor => {
                    if (monitor.logs && monitor.logs.length > 0) {
                        const recentDownLogs = monitor.logs.filter(log => log.type === 2); // Type 2 = down
                        
                        recentDownLogs.forEach(log => {
                            incidents.push({
                                id: log.id,
                                title: `${monitor.friendly_name} - Downtime`,
                                description: `Service was down for ${this.formatDuration(log.duration)}`,
                                time: this.formatTimeAgo(new Date(log.datetime * 1000)),
                                status: 'resolved'
                            });
                        });
                    }
                });
                
                return incidents.slice(0, 5); // Return only 5 most recent incidents
            }

            renderDashboard() {
                this.renderMonitors();
                this.renderIncidents();
                this.updateOverallStatus();
            }

            renderMonitors() {
                const grid = document.getElementById('monitorsGrid');
                
                if (this.monitors.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-server"></i>
                            <p>No monitors configured</p>
                            <p style="font-size: 11px; margin-top: 10px;">Add monitors in UptimeRobot dashboard</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = this.monitors.map(monitor => `
                    <div class="monitor-card">
                        <div class="monitor-header">
                            <div class="monitor-name">
                                <i class="fas ${this.getMonitorIcon(monitor.type)}"></i>
                                ${monitor.friendly_name}
                            </div>
                            <div class="monitor-status ${this.getStatusClass(monitor.status)}">
                                ${this.getStatusText(monitor.status)}
                            </div>
                        </div>
                        <div class="monitor-url">${monitor.url}</div>
                        <div class="monitor-stats">
                            <div class="stat">
                                <div class="stat-label">Uptime (30d)</div>
                                <div class="stat-value">${monitor.all_time_uptime_ratio}%</div>
                            </div>
                            <div class="stat">
                                <div class="stat-label">Response Time</div>
                                <div class="stat-value">${monitor.average_response_time}ms</div>
                            </div>
                            <div class="stat">
                                <div class="stat-label">Type</div>
                                <div class="stat-value">${this.getMonitorType(monitor.type)}</div>
                            </div>
                        </div>
                        <div class="uptime-bar">
                            <div class="uptime-fill uptime-up" style="width: ${monitor.all_time_uptime_ratio}%"></div>
                        </div>
                        <div class="response-time ${this.getResponseTimeClass(monitor.average_response_time)}">
                            <span>${monitor.average_response_time}ms</span> average response
                        </div>
                    </div>
                `).join('');
            }

            renderIncidents() {
                const incidentList = document.getElementById('incidentList');
                
                if (this.incidents.length === 0) {
                    incidentList.innerHTML = `
                        <div class="empty-state" style="padding: 20px;">
                            <i class="fas fa-check-circle"></i>
                            <p>No recent incidents</p>
                        </div>
                    `;
                    return;
                }

                incidentList.innerHTML = this.incidents.map(incident => `
                    <div class="incident">
                        <div class="incident-header">
                            <div class="incident-title">
                                <i class="fas fa-exclamation-circle"></i>
                                ${incident.title}
                            </div>
                            <div class="incident-time">${incident.time}</div>
                        </div>
                        <div class="incident-desc">${incident.description}</div>
                    </div>
                `).join('');
            }

            updateOverallStatus() {
                const overallStatus = this.calculateOverallStatus();
                const statusIndicator = document.getElementById('overallStatus');
                const statusText = document.getElementById('statusText');
                
                statusIndicator.className = `status-indicator ${overallStatus}`;
                
                switch(overallStatus) {
                    case 'up':
                        statusText.textContent = 'All Systems Operational';
                        break;
                    case 'down':
                        statusText.textContent = 'Systems Experiencing Issues';
                        break;
                    case 'degraded':
                        statusText.textContent = 'Partial System Issues';
                        break;
                }
            }

            calculateOverallStatus() {
                const upMonitors = this.monitors.filter(m => m.status === 2).length;
                const totalMonitors = this.monitors.length;
                
                if (totalMonitors === 0) return 'unknown';
                if (upMonitors === totalMonitors) return 'up';
                if (upMonitors === 0) return 'down';
                return 'degraded';
            }

            updateLastUpdated() {
                this.lastUpdate = new Date();
                const timeStr = this.lastUpdate.toLocaleTimeString();
                document.getElementById('updateTime').textContent = timeStr;
            }

            startAutoRefresh() {
                setInterval(() => this.updateStatus(), CONFIG.UPDATE_INTERVAL);
            }

            // Helper methods
            getMonitorIcon(type) {
                switch(type) {
                    case 1: return 'fa-globe'; // HTTP
                    case 2: return 'fa-keyboard'; // Keyword
                    case 3: return 'fa-eye'; // Ping
                    case 4: return 'fa-plug'; // Port
                    default: return 'fa-question-circle';
                }
            }

            getMonitorType(type) {
                switch(type) {
                    case 1: return 'HTTP';
                    case 2: return 'Keyword';
                    case 3: return 'Ping';
                    case 4: return 'Port';
                    default: return 'Unknown';
                }
            }

            getStatusClass(statusCode) {
                switch(statusCode) {
                    case 2: return 'status-up'; // Up
                    case 8: return 'status-degraded'; // Seems down
                    case 9: return 'status-down'; // Down
                    default: return 'status-degraded';
                }
            }

            getStatusText(statusCode) {
                switch(statusCode) {
                    case 2: return 'Operational';
                    case 8: return 'Degraded';
                    case 9: return 'Down';
                    default: return 'Unknown';
                }
            }

            getResponseTimeClass(ms) {
                if (ms < 100) return 'good';
                if (ms < 500) return 'slow';
                return 'bad';
            }

            formatDuration(seconds) {
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                
                if (hours > 0) {
                    return `${hours}h ${minutes}m`;
                }
                return `${minutes}m`;
            }

            formatTimeAgo(date) {
                const seconds = Math.floor((new Date() - date) / 1000);
                
                if (seconds < 60) return 'Just now';
                if (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;
                if (seconds < 86400) return `${Math.floor(seconds / 3600)} hours ago`;
                return `${Math.floor(seconds / 86400)} days ago`;
            }

            showError(message) {
                const grid = document.getElementById('monitorsGrid');
                grid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>${message}</p>
                        <p style="font-size: 11px; margin-top: 10px;">Using demo data</p>
                    </div>
                `;
                
                // Load mock data as fallback
                this.loadMockData().then(() => {
                    this.renderDashboard();
                });
            }
        }

        // Initialize the dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new StatusDashboard();
        });

        // Instructions for setting up with UptimeRobot
        console.log(`
        ============================================
        STATUS DASHBOARD SETUP INSTRUCTIONS:
        
        1. Get your UptimeRobot API Key:
           - Sign up at https://uptimerobot.com
           - Go to "My Settings" → "API Settings"
           - Copy your "Main API Key"
        
        2. Configure the dashboard:
           - Replace 'YOUR_UPTIMEROBOT_API_KEY' with your actual key
           - Set USE_MOCK_DATA: false
        
        3. Create monitors in UptimeRobot:
           - Add HTTP, Ping, Port, or Keyword monitors
           - They will automatically appear in your dashboard
        
        Free tier includes:
        - 100 monitors
        - 5-minute check intervals
        - 50 log entries per monitor
        ============================================
        `);
    </script>
</body>
</html>